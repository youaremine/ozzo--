(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e3de3c3"],{"3ae5":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"information"},[a("h2",[t._v("商户基本信息")]),t._v(" "),t.merModel?a("div",{staticClass:"business-msg"},[a("div",{staticClass:"lab-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"user-msg"},[a("div",{staticClass:"basic-information"},[a("div",[t._v("商户名称："+t._s(t.merData.mer_name))]),t._v(" "),a("div",[t._v("商户负责人手机号："+t._s(t.merData.mer_phone))])]),t._v(" "),t.merData.merchantCategory.category_name?a("div",{staticClass:"basic-information"},[a("div",[t._v("商户分类："+t._s(t.merData.merchantCategory.category_name||""))]),t._v(" "),a("div",[t._v("商户类别："+t._s(t.merData.is_trader?"自营":"非自营"))])]):t._e(),t._v(" "),a("div",{staticClass:"basic-information"},[a("div",[t._v("商户负责人姓名："+t._s(t.merData.real_name))]),t._v(" "),a("div",[t._v("商户入驻时间："+t._s(t.merData.create_time))])]),t._v(" "),a("div",{staticClass:"basic-information"},[a("div",[t._v("\n          是否开启商户：\n          "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.merData.mer_state,callback:function(e){t.$set(t.merData,"mer_state",e)},expression:"merData.mer_state"}}),t._v(" "),a("span",{staticClass:"trip"},[t._v("开启，店铺即可展示在移动端")])],1)])]),t._v(" "),a("div",{staticClass:"form-data"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.merData,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"店铺Banner(710*200px)","label-width":"170px",prop:"mer_banner"}},[a("div",{staticClass:"upLoadPicBox",attrs:{title:"750*750px"},on:{click:function(e){return t.modalPicTap("1")}}},[t.merData.mer_banner?a("div",{staticClass:"pictrue"},[a("img",{attrs:{src:t.merData.mer_banner}})]):a("div",{staticClass:"upLoad"},[a("i",{staticClass:"el-icon-camera cameraIconfont"})])])]),t._v(" "),a("el-form-item",{attrs:{label:"店铺头像(120*120px)","label-width":"170px",prop:"mer_avatar"}},[a("div",{staticClass:"upLoadPicBox",attrs:{title:"750*750px"},on:{click:function(e){return t.modalPicTap("2")}}},[t.merData.mer_avatar?a("div",{staticClass:"pictrue"},[a("img",{attrs:{src:t.merData.mer_avatar}})]):a("div",{staticClass:"upLoad"},[a("i",{staticClass:"el-icon-camera cameraIconfont"})])])]),t._v(" "),a("el-form-item",{attrs:{label:"店铺街banner(710*134px)","label-width":"170px"}},[a("div",{staticClass:"tip-form"},[a("div",{staticClass:"upLoadPicBox",attrs:{title:"750*750px"},on:{click:function(e){return t.modalPicTap("3")}}},[t.merData.mini_banner?a("div",{staticClass:"pictrue"},[a("img",{attrs:{src:t.merData.mini_banner}})]):a("div",{staticClass:"upLoad"},[a("i",{staticClass:"el-icon-camera cameraIconfont"})])]),t._v(" "),a("span",[t._v("注:此图上传后显示在店铺街位置，如果未上传默认展示店铺Banner图")])])]),t._v(" "),a("el-form-item",{attrs:{label:"商户简介",prop:"mer_info","label-width":"170px"}},[a("el-input",{attrs:{type:"textarea",placeholder:"文字简介，200字以内"},model:{value:t.merData.mer_info,callback:function(e){t.$set(t.merData,"mer_info",e)},expression:"merData.mer_info"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商户关键字",prop:"mer_keyword","label-width":"170px"}},[a("div",{staticClass:"tip-form"},[a("el-input",{attrs:{placeholder:"手机/电脑/数码相机"},model:{value:t.merData.mer_keyword,callback:function(e){t.$set(t.merData,"mer_keyword",e)},expression:"merData.mer_keyword"}}),t._v(" "),a("span",[t._v("设置后用户在搜索该关键字时，可搜索到本店铺")])],1)]),t._v(" "),a("el-form-item",{attrs:{label:"客服电话",prop:"service_phone","label-width":"170px"}},[a("el-input",{model:{value:t.merData.service_phone,callback:function(e){t.$set(t.merData,"service_phone",e)},expression:"merData.service_phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商户地址",prop:"mer_address","label-width":"170px"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"enter-button":"查找位置",placeholder:"请输入商户地址（地址中请包含城市名称，否则会影响搜索精度）"},model:{value:t.merData.mer_address,callback:function(e){t.$set(t.merData,"mer_address",e)},expression:"merData.mer_address"}},[a("el-button",{attrs:{slot:"append",type:"primary"},on:{click:t.onSearch},slot:"append"},[t._v("查找位置")])],1)],1),t._v(" "),t.mapKey?a("Maps",{ref:"mapChild",staticClass:"map-sty",attrs:{mapKey:t.mapKey,lat:Number(t.merData.lat||34.34127),lon:Number(t.merData.long||108.93984),address:t.merData.mer_address},on:{getCoordinates:t.getCoordinates}}):t._e(),t._v(" "),a("el-form-item")],1)],1),t._v(" "),a("div",{staticClass:"lab-title"},[t._v("功能信息")]),t._v(" "),a("div",{staticClass:"user-msg"},[a("div",{staticClass:"basic-information"},[t._v("商户手续费："+t._s(Number(t.merData.commission_rate)>0?parseFloat(t.merData.commission_rate):parseFloat(100*t.merData.merchantCategory.commission_rate))+"%")]),t._v(" "),a("div",{staticClass:"basic-information"},[t._v("添加商品："+t._s(t.merData.is_audit?"需平台审核":"平台免审核"))]),t._v(" "),a("div",{staticClass:"basic-information"},[t._v("开启直播间："+t._s(t.merData.is_bro_room?"需平台审核":"平台免审核"))]),t._v(" "),a("div",{staticClass:"basic-information"},[t._v("添加直播商品："+t._s(t.merData.is_bro_goods?"需平台审核":"平台免审核"))]),t._v(" "),a("div",{staticClass:"basic-information"},[t._v("平台首页推荐商户："+t._s(t.merData.is_best?"是":"否"))])]),t._v(" "),a("div",{staticClass:"submit-button"},[a("el-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")])],1)]):t._e()])},n=[],s=a("75fc"),i=(a("ac6a"),a("456d"),a("90e7")),o=a("c24f"),c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{width:"100%",height:"450px"},attrs:{id:"container"}})])}];a("c5f6");function l(t){return new Promise((function(e,a){window.init=function(){e(window.qq)};var r=document.createElement("script");r.type="text/javascript",r.src="https://map.qq.com/api/js?v=2.exp&callback=init&key=".concat(t),r.onerror=a,document.head.appendChild(r)}))}var d={props:{lat:{type:Number,default:34.34127},lon:{type:Number,default:108.93984},mapKey:{tyep:String},address:{tyep:String}},data:function(){return{geocoder:void 0,marker:null,resultDatail:{}}},created:function(){this.initMap()},methods:{initMap:function(){var t=this;l(this.mapKey).then((function(e){var a,r=new e.maps.LatLng(t.lat,t.lon);a=new e.maps.Map(document.getElementById("container"),{zoom:15}),t.geocoder=new e.maps.Geocoder({complete:function(r){a.setCenter(r.detail.location),t.marker=new e.maps.Marker({map:a,position:r.detail.location}),t.resultDatail=r.detail,t.$emit("getCoordinates",r.detail)}}),console.log(t.address),t.geocoder.getAddress(r),e.maps.event.addListener(a,"click",(function(a){t.marker.setMap(null),t.marker.position={lat:a.latLng.getLat(),lng:a.latLng.getLng()};var r=new e.maps.LatLng(a.latLng.getLat(),a.latLng.getLng());t.geocoder.getAddress(r)}))}))},searchKeyword:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"西安";this.marker.setMap(null),this.geocoder.getLocation(t)}}},u=d,p=a("2877"),f=Object(p["a"])(u,c,m,!1,null,"ebf88e62",null),v=f.exports,_={name:"Information",components:{Maps:v},data:function(){var t=function(t,e,a){if(""===e)a(new Error("请输入客服电话"));else{var r=null,n=/^1(3|4|5|6|7|8|9)\d{9}$/,s=/^(0[0-9]{2,3}\-)([2-9][0-9]{4,7})+(\-[0-9]{1,4})?$/;if(r=0==e.charAt(0)?s:n,!r.test(e))return a(new Error("请填写客服电话(座机格式'区号-座机号码')"));a()}};return{merModel:!1,merData:{},mapKey:"",address:"",submitLoading:!1,rules:{mer_banner:[{required:!0,message:"请上传店铺banner"}],mer_avatar:[{required:!0,message:"请上传店铺头像"}],mer_info:[{required:!0,message:"请输入商户简介",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}],mer_keyword:[{required:!1,message:"请输入商户关键字",trigger:"blur"}],service_phone:[{required:!0,validator:t,trigger:"blur"}],mer_address:[{required:!0,message:"请输入商户地址",trigger:"blur"}]}}},created:function(){this.getMapInfo(),this.getInfo()},methods:{getCoordinates:function(t){this.merData.lat=t.location.lat||34.34127,this.merData.long=t.location.lng||108.93984,console.log(t)},getInfo:function(){var t=this;this.merModel=!1,Object(o["i"])().then((function(e){t.merData=e.data,t.merModel=!0}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$message("请完善信息后再进行提交"),e.submitLoading=!1,!1;var a=Object.keys(e.rules),r={};[].concat(Object(s["a"])(a),["mer_state","long","lat","mini_banner"]).map((function(t){r[t]=e.merData[t]})),e.submitLoading=!0,Object(o["s"])(r).then((function(t){console.log(t),e.submitLoading=!1,e.$message.success("提交成功")})).catch((function(t){e.submitLoading=!1,e.$message.error(t.data.message)}))}))},onSearch:function(){this.$refs.mapChild.searchKeyword(this.merData.mer_address)},getMapInfo:function(){var t=this,e=this;Object(i["m"])().then((function(e){console.log(e),t.mapKey=e.data.tx_map_key})).catch((function(t){e.$message.error(t.message)}))},modalPicTap:function(t,e,a){var r=this;console.log(t,e,a);var n=this;this.$modalUpload((function(a){console.log(a),"1"!==t||e||(n.merData.mer_banner=a[0]),"2"!==t||e||(n.merData.mer_avatar=a[0]),"3"!==t||e||(n.merData.mini_banner=a[0]),console.log(r.merData)}),t)}}},g=_,b=(a("fcd5"),Object(p["a"])(g,r,n,!1,null,"dfb4f4f4",null));e["default"]=b.exports},"90e7":function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"i",(function(){return s})),a.d(e,"l",(function(){return i})),a.d(e,"j",(function(){return o})),a.d(e,"k",(function(){return c})),a.d(e,"c",(function(){return m})),a.d(e,"a",(function(){return l})),a.d(e,"g",(function(){return d})),a.d(e,"b",(function(){return u})),a.d(e,"f",(function(){return p})),a.d(e,"e",(function(){return f})),a.d(e,"d",(function(){return v})),a.d(e,"m",(function(){return _})),a.d(e,"n",(function(){return g}));var r=a("0c6d");function n(t){return r["a"].get("system/role/lst",t)}function s(){return r["a"].get("system/role/create/form")}function i(t){return r["a"].get("system/role/update/form/".concat(t))}function o(t){return r["a"].delete("system/role/delete/".concat(t))}function c(t,e){return r["a"].post("system/role/status/".concat(t),{status:e})}function m(t){return r["a"].get("system/admin/lst",t)}function l(){return r["a"].get("/system/admin/create/form")}function d(t){return r["a"].get("system/admin/update/form/".concat(t))}function u(t){return r["a"].delete("system/admin/delete/".concat(t))}function p(t,e){return r["a"].post("system/admin/status/".concat(t),{status:e})}function f(t){return r["a"].get("system/admin/password/form/".concat(t))}function v(t){return r["a"].get("system/admin/log",t)}function _(){return r["a"].get("take/info")}function g(t){return r["a"].post("take/update",t)}},bc49:function(t,e,a){},fcd5:function(t,e,a){"use strict";var r=a("bc49"),n=a.n(r);n.a}}]);