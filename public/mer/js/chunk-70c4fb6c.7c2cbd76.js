(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70c4fb6c"],{"504c":function(t,s,a){var e=a("9e1e"),i=a("0d58"),l=a("6821"),o=a("52a7").f;t.exports=function(t){return function(s){var a,r=l(s),n=i(r),c=n.length,u=0,d=[];while(c>u)a=n[u++],e&&!o.call(r,a)||d.push(t?[a,r[a]]:r[a]);return d}}},"6ae9":function(t,s,a){"use strict";var e=a("a099"),i=a.n(e);i.a},8615:function(t,s,a){var e=a("5ca1"),i=a("504c")(!1);e(e.S,"Object",{values:function(t){return i(t)}})},9132:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"divBox"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"container"},[a("el-form",{attrs:{size:"small","label-width":"120px",inline:""}},[a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"状态："}},[a("el-radio-group",{staticClass:"mr20",attrs:{type:"button",size:"small",clearable:""},on:{change:function(s){return t.getList("")}},model:{value:t.tableFrom.product_status,callback:function(s){t.$set(t.tableFrom,"product_status",s)},expression:"tableFrom.product_status"}},t._l(t.fromList.fromTxt,(function(s,e){return a("el-radio-button",{key:e,attrs:{label:s.val}},[t._v(t._s(s.text))])})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"商品搜索："}},[a("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入商品名称"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.getList(1)}},model:{value:t.tableFrom.keyword,callback:function(s){t.$set(t.tableFrom,"keyword",s)},expression:"tableFrom.keyword"}},[a("el-button",{staticClass:"el-button-solt",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(s){return t.getList(1)}},slot:"append"})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"助力活动状态："}},[a("el-select",{staticClass:"filter-item selWidth mr20",attrs:{placeholder:"请选择",clearable:""},on:{change:function(s){return t.getList(1)}},model:{value:t.tableFrom.type,callback:function(s){t.$set(t.tableFrom,"type",s)},expression:"tableFrom.type"}},t._l(t.assistStatusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"活动商品状态："}},[a("el-select",{staticClass:"filter-item selWidth mr20",attrs:{placeholder:"请选择",clearable:""},on:{change:t.getList},model:{value:t.tableFrom.us_status,callback:function(s){t.$set(t.tableFrom,"us_status",s)},expression:"tableFrom.us_status"}},t._l(t.productStatusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("router-link",{attrs:{to:{path:t.roterPre+"/marketing/assist/create"}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[a("i",{staticClass:"add"},[t._v("+")]),t._v(" 添加助力商品\n        ")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData.data,size:"mini","row-class-name":t.tableRowClassName},on:{rowclick:function(s){return s.stopPropagation(),t.closeEdit(s)}}},[a("el-table-column",{attrs:{prop:"product_assist_id",label:"ID","min-width":"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"助力商品图","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"demo-image__preview"},[a("el-image",{attrs:{src:t.row.product.image,"preview-src-list":[t.row.product.image]}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"store_name",label:"商品名称","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"助力价格","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",[t._v(t._s(s.row.assistSku&&s.row.assistSku[0].assist_price?s.row.assistSku[0].assist_price:0))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"助力活动状态","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",[t._v(t._s(0===s.row.assist_status?"未开始":1===s.row.assist_status?"正在进行":"已结束"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动时间","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("div",[t._v("开始日期："+t._s(s.row.start_time&&s.row.start_time?s.row.start_time.slice(0,10):""))]),t._v(" "),a("div",[t._v("结束日期："+t._s(s.row.end_time&&s.row.end_time?s.row.end_time.slice(0,10):""))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"助力成功人数/参与人次","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",[t._v(t._s(s.row.success)+" / "+t._s(s.row.all))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"限量","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",[t._v(t._s(s.row.assistSku&&s.row.assistSku[0]?s.row.assistSku[0].stock_count:0))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"限量剩余","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",[t._v(t._s(s.row.assistSku&&s.row.assistSku[0]?s.row.assistSku[0].stock:0))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"product.sort",align:"center",label:"排序","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(s){return[s.row.index===t.tabClickIndex?a("span",[a("el-input",{attrs:{type:"number",maxlength:"300",size:"mini",autofocus:""},on:{blur:function(a){return t.inputBlur(s)}},model:{value:s.row["product"]["sort"],callback:function(a){t.$set(s.row["product"],"sort",t._n(a))},expression:"scope.row['product']['sort']"}})],1):a("span",{on:{dblclick:function(a){return a.stopPropagation(),t.tabClick(s.row)}}},[t._v(t._s(s.row["product"]["sort"]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"上/下架","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"上架","inactive-text":"下架"},on:{change:function(a){return t.onchangeIsShow(s.row)}},model:{value:s.row.is_show,callback:function(a){t.$set(s.row,"is_show",a)},expression:"scope.row.is_show"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"商品状态","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",[t._v(t._s(t._f("productStatusFilter")(s.row.us_status)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"审核状态","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("span",[t._v(t._s(0===s.row.product_status?"待审核":1===s.row.product_status?"审核通过":"审核失败"))]),t._v(" "),-1===s.row.product_status?a("span",{staticStyle:{"font-size":"12px"}},[a("br"),t._v("\n            原因："+t._s(s.row.refusal)+"\n          ")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(s){return[0===s.row.product_status?a("router-link",{attrs:{to:{path:t.roterPre+"/marketing/assist/create/"+s.row.product_assist_id}}},[a("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"}},[t._v("编辑")])],1):t._e(),t._v(" "),a("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDetail(s.row.product_assist_id)}}},[t._v("查看详情")]),t._v(" "),1!==s.row.product_status||2==s.row.assist_status?a("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(s.row.product_assist_id,s.$index)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[20,40,60,80],"page-size":t.tableFrom.limit,"current-page":t.tableFrom.page,layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1),t._v(" "),t.dialogVisible?a("el-dialog",{attrs:{title:"助力商品详情",center:"",visible:t.dialogVisible,width:"700px"},on:{"update:visible":function(s){t.dialogVisible=s}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"box-container"},[a("div",{staticClass:"title"},[t._v("基本信息：")]),t._v(" "),a("div",{staticClass:"acea-row"},[a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("商品ID：")]),t._v(t._s(t.formValidate.product_id))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("商品名称：")]),a("span",[t._v(t._s(t.formValidate.store_name))])]),t._v(" "),a("div",{staticClass:"list sp100 image"},[a("label",{staticClass:"name"},[t._v("商品图：")]),t._v(" "),a("img",{staticStyle:{"max-width":"150px",height:"80px"},attrs:{src:t.formValidate.image}})])]),t._v(" "),a("div",{staticClass:"title",staticStyle:{"margin-top":"20px"}},[t._v("助力商品活动信息：")]),t._v(" "),a("div",{staticClass:"acea-row"},[a("div",{staticClass:"list sp100"},[a("label",{staticClass:"name"},[t._v("助力活动简介：")]),t._v(t._s(t.formValidate.store_info))]),t._v(" "),a("div",{staticClass:"list sp100"},[a("label",{staticClass:"name"},[t._v("助力活动日期：")]),t._v(t._s(t.formValidate.start_time+"-"+t.formValidate.end_time))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("助力价：")]),t._v(t._s(t.formValidate.price)+"元")]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("已售商品数：")]),t._v(t._s(t.formValidate.pay)+t._s(t.formValidate.unit_name))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("限量：")]),t._v(t._s(t.formValidate.stock_count))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("限量剩余：")]),t._v(t._s(t.formValidate.stock))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("限购件数：")]),t._v(t._s(t.formValidate.pay_count)+t._s(t.formValidate.unit_name))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("助力次数：")]),t._v(t._s(t.formValidate.assist_user_count))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("助力人数：")]),t._v(t._s(t.formValidate.assist_count)+"人")]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("审核状态：")]),t._v(" "),a("span",[t._v(t._s(0===t.formValidate.reviewStatus?"待审核":1===t.formValidate.reviewStatus?"审核通过":"审核失败"))]),t._v(" "),-1===t.formValidate.reviewStatus?a("span",{staticStyle:{"font-size":"12px"}},[a("br"),t._v("\n            原因："+t._s(t.formValidate.refusal)+"\n          ")]):t._e()]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("助力成功/参与人次：")]),t._v(t._s(t.formValidate.success)+" / "+t._s(t.formValidate.all))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("助力活动状态：")]),t._v(t._s(0===t.formValidate.assist_status?"未开始":1===t.formValidate.assist_status?"正在进行":"已结束"))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("显示状态：")]),t._v(t._s(1===t.formValidate.is_show?"显示":"隐藏"))]),t._v(" "),a("div",{staticClass:"list sp"},[a("label",{staticClass:"name"},[t._v("创建时间：")]),t._v(t._s(t.formValidate.create_time))])])])])]):t._e()],1)},i=[],l=(a("96cf"),a("3b8d")),o=(a("8615"),a("ac6a"),a("28a5"),a("55dd"),a("c4c8")),r=a("83d6"),n=a("b7be"),c={name:"ProductList",data:function(){return{props:{emitPath:!1},roterPre:r["roterPre"],listLoading:!0,tableData:{data:[],total:0},assistStatusList:[{label:"未开始",value:0},{label:"正在进行",value:1},{label:"已结束",value:2}],productStatusList:[{label:"上架显示",value:1},{label:"下架",value:0},{label:"平台关闭",value:-1}],fromList:{custom:!0,fromTxt:[{text:"全部",val:""},{text:"待审核",val:"0"},{text:"已审核",val:"1"},{text:"审核失败",val:"-1"}]},tableFrom:{page:1,limit:20,keyword:"",product_status:this.$route.query.status?this.$route.query.status:"",type:"",us_status:"",product_assist_id:this.$route.query.id?this.$route.query.id:""},product_assist_id:this.$route.query.id?this.$route.query.id:"",modals:!1,dialogVisible:!1,loading:!1,manyTabTit:{},manyTabDate:{},formValidate:{},attrInfo:{},tabClickIndex:""}},watch:{product_assist_id:function(t,s){this.getList("")}},mounted:function(){this.getList("")},methods:{tableRowClassName:function(t){var s=t.row,a=t.rowIndex;s.index=a},tabClick:function(t){this.tabClickIndex=t.index},inputBlur:function(t){var s=this;(!t.row.product.sort||t.row.product.sort<0)&&(t.row.product.sort=0),Object(n["a"])(t.row.product_assist_id,{sort:t.row.product.sort}).then((function(t){s.closeEdit()})).catch((function(t){}))},closeEdit:function(){this.tabClickIndex=null},renderheader:function(t,s){var a=s.column;s.$index;return t("span",{},[t("span",{},a.label.split("|")[0]),t("br"),t("span",{},a.label.split("|")[1])])},watCh:function(t){var s=this,a={},e={};this.formValidate.attr.forEach((function(t,s){a["value"+s]={title:t.value},e["value"+s]=""})),this.ManyAttrValue.forEach((function(t,a){var e=Object.values(t.detail).sort().join("/");s.attrInfo[e]&&(s.ManyAttrValue[a]=s.attrInfo[e])})),this.attrInfo={},this.ManyAttrValue.forEach((function(t){s.attrInfo[Object.values(t.detail).sort().join("/")]=t})),this.manyTabTit=a,this.manyTabDate=e},goDetail:function(t){var s=this;this.dialogVisible=!0,Object(o["e"])(t).then(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s.loading=!1,e=a.data,s.formValidate={product_id:e.product_assist_id,image:e.product.image,store_name:e.store_name,store_info:e.store_info,start_time:e.start_time?e.start_time:"",end_time:e.end_time?e.end_time:"",create_time:e.create_time,unit_name:e.product.unit_name,is_show:e.is_show,stock_count:e.assistSku[0].stock_count,stock:e.assistSku[0].stock,content:e.content,price:e.assistSku[0].assist_price,assist_status:e.assist_status,reviewStatus:e.product_status,refusal:e.refusal,all:e.all,pay:e.pay,assist_user_count:e.assist_user_count,assist_count:e.assist_count,pay_count:e.pay_count,success:e.success},s.fullscreenLoading=!1;case 4:case"end":return t.stop()}}),t)})));return function(s){return t.apply(this,arguments)}}()).catch((function(t){s.fullscreenLoading=!1,s.$message.error(t.message)}))},getList:function(t){var s=this;this.listLoading=!0,this.tableFrom.page=t||this.tableFrom.page,Object(o["f"])(this.tableFrom).then((function(t){s.tableData.data=t.data.list,s.tableData.total=t.data.count,s.listLoading=!1})).catch((function(t){s.listLoading=!1,s.$message.error(t.message)}))},pageChange:function(t){this.tableFrom.page=t,this.getList("")},handleSizeChange:function(t){this.tableFrom.limit=t,this.getList("")},handleDelete:function(t,s){var a=this;this.$modalSure().then((function(){Object(o["b"])(t).then((function(t){var e=t.message;a.$message.success(e),a.tableData.data.splice(s,1)})).catch((function(t){var s=t.message;a.$message.error(s)}))}))},onchangeIsShow:function(t){var s=this;Object(o["g"])(t.product_assist_id,t.is_show).then((function(t){var a=t.message;s.$message.success(a),s.getList("")})).catch((function(t){var a=t.message;s.$message.error(a)}))}}},u=c,d=(a("6ae9"),a("2877")),_=Object(d["a"])(u,e,i,!1,null,"aec3a774",null);s["default"]=_.exports},a099:function(t,s,a){}}]);